<html>
<head>
<style>
    .btn {
        width: 50px;
        height: 50px;
        cursor: pointer;
        margin: 10px;
        display: inline-block;
    }
    .show {
        background-color: #CCC;
    }
    .hide {
        background-color: #DDD;
    }
    .fullslidecanvas {
        background-color: #000;
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0px;
        left: 0px;
    }
</style>
</head>
<body>
<!-- <div class="btn show" onclick="firstRender('three-model-render-container');" >show sfeir</div> -->
<div class="btn show" onclick="firstRender('SF');" >show sf</div>
<div class="btn show" onclick="firstRender('E');" >show e</div>
<div class="btn show" onclick="firstRender('IR');" >show ir</div>

<div class="btn hide" onclick="killFirstRender('three-model-render-container');" >hide</div>

<!-- <div style="width:200px;height:200px;position:relative;"> -->
<!--     <div id="three-model-render-container" class="fullslidecanvas"> -->
<!--     </div> -->
<!-- </div>  -->
<div style="width:200px;height:200px;position:relative;">
    <div id="SF" class="fullslidecanvas">
    </div>
</div> 
<div style="width:400px;height:400px;position:relative;">
    <div id="E" class="fullslidecanvas">
    </div>
</div> 
<div style="width:200px;height:200px;position:relative;">
    <div id="IR" class="fullslidecanvas">
    </div>
</div> 

<script src="three.min.js"></script>
<script src="ColladaLoader.js"></script>
<script>
 
 function firstRender(id)
 {   
     // dimensions
     var canvascontainer = document.getElementById(id);
     // relaunch if not ready
     if (canvascontainer == null || canvascontainer.clientWidth == 0 || canvascontainer.clientHeight == 0 || canvascontainer.animation === -1) { window.setTimeout(function() {firstRender(id);}, 200); return; }
     
     // do nothing if already running
     if (canvascontainer.animation)
         return;
     else
         canvascontainer.animation = true;
     
     var width  = canvascontainer.clientWidth;
     var height = canvascontainer.clientHeight-2; // unfathomable bug: why do I get a scroll bar with the full height ???
     
     // renderer
     var renderer = new THREE.WebGLRenderer ({antialias: true});
     renderer.setSize(width, height);
     
     // glue to HTML element
     canvascontainer.appendChild(renderer.domElement);
     renderer.setClearColorHex(0x000000, 0);
     renderer.clear();
     
     // camera
     var camera = new THREE.PerspectiveCamera(35, width / height, 1, 3000);
     camera.position.z = 300; // 300
     
     // scene
     var scene = new THREE.Scene();
     
     // lights
     var light1 = new THREE.DirectionalLight(0xffffff, 1);
     light1.position.set(1, 1, 0.3);
     scene.add(light1);
     
     var light2 = new THREE.DirectionalLight(0xffffff, 1);
     light2.position.set(-1, 1, -0.3);
     scene.add(light2);
     
     var light3 = new THREE.DirectionalLight(0xffffff, 0.7);
     light3.position.set(0.5, -0.5, 1);
     scene.add(light3);
     
     // textured cube
     switch (id)
     {
     
     case "three-model-render-container":
         firstLoadAndroid(scene, "sfeir2.dae");
         break;
     case "SF":
         firstLoadAndroid(scene, "SF.dae");
         break;
     case "E":
         firstLoadAndroid(scene, "E.dae");
         break;
     case "IR":
         firstLoadAndroid(scene, "IR.dae");
         break;
     default:
         firstLoadCube(scene);
     }
     
     var t0 = new Date().getTime();
     
     var anim = function()
     {
         var t = new Date().getTime();
         // when the canvas dies, abort animation loop
         if (canvascontainer.animation)
         {
             scene.traverse(function(object)
             {
                 // models: slow rotation
                 if (object instanceof THREE.Object3D && object.name.indexOf("mymodel") >= 0)
                 {
                     object.rotation.y = (t-t0)/1000 - Math.PI/2;
                 };
             } );
         
             renderer.render(scene, camera);
             requestAnimationFrame(anim);
         }
     };
     requestAnimationFrame(anim);
 }

 function firstLoadAndroid(scene, file_name)
 {   
     var loader = new THREE.ColladaLoader();
     loader.options.convertUpAxis= true;
     loader.options.upAxis = 'Y';
     
     loader.load(file_name,
             function(collada)
             {
                 var scale = new THREE.Vector3(1,1,1);
//                  var scale = new THREE.Vector3(3,3,3);
                 var model = collada.scene;
                 model.position.z = 0;
//                  model.position.y = -80;
                 model.position.y = -20;
                 model.scale.copy(scale);
                 //model.rotation.copy(rotation);
                 model.name = "mymodel-sfeir";
                 scene.add(model);
             } );
 }
 
 function killFirstRender(id)
 {
     var canvascontainer = document.getElementById(id);
     canvascontainer.animation = -1; // dying (set this wether the animation is running or not)
     window.setTimeout(function()
     {
         // signal death of this animation
         delete canvascontainer.animation;
         if (canvascontainer.firstChild !== null) {
//              canvascontainer.removeChild(canvascontainer.firstChild); it does not work
        	 canvascontainer.innerHTML = "";
         }
         
     }, 300);
 }
 
</script>
</body>
</html>
